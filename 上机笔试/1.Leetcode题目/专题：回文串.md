# 专题：回文串

#### 【方法一】中心扩展法

##### 5. 最长回文子串

给你一个字符串 `s`，找到 `s` 中最长的回文子串。

```
输入：s = "babad"
输出："bab"
解释："aba" 同样是符合题意的答案。
```

对于每个位置，都尝试“中心扩展”

```python
class Solution:
    def longestPalindrome(self, s: str):
        mmax = 0
        max_str = ""

        for i in range(len(s)):
            length = self.expand(i,i,s)
            if length > mmax:
                mmax = length
                max_str = s[i-int((length-1)/2):i+int((length-1)/2)+1]

        for i in range(len(s)-1):
            length = self.expand(i, i+1, s)
            if length > mmax:
                mmax = length
                max_str = s[i - int((length-2) / 2):i + 1+int((length-2) / 2) + 1]
        print(mmax,max_str)
        return max_str

    def expand(self,left,right,str):  ##中心扩展
        n = len(str)
        while(left >= 0 and right<n):
            if str[left] == str[right]:
                left -= 1
                right += 1
            else:
                break
        return right-left-1  ##最长子串
```

【方法二】直接得到s[i:j+1]是否是回文串

使用dp：

```python
        n = len(s)
        dp = [[True]*n for _ in range(n)]

        for i in range(n-1,-1,-1):
            for j in range(i+1,n):
                dp[i][j] = dp[i+1][j-1] and s[i] == s[j]
```

其中`dp[i][j]` 表示`s[i,j]`(左闭右闭) 是否是回文串。注意此dp矩阵只填了下三角。



#### [516. 最长回文子序列](https://leetcode-cn.com/problems/longest-palindromic-subsequence/)

难度中等771

给你一个字符串 `s` ，找出其中最长的回文子序列，并返回该序列的长度。

子序列定义为：不改变剩余字符顺序的情况下，删除某些字符或者不删除任何字符形成的一个序列。

 

**示例 1：**

```
输入：s = "bbbab"
输出：4
解释：一个可能的最长回文子序列为 "bbbb" 。
```

题解：

修改如上的dp算法

```python
class Solution:
    def longestPalindromeSubseq(self, s: str):
        n = len(s)
        dp = [[0]*n for _ in range(n)]
        for i in range(n):
            dp[i][i] = 1 ##初始化

        for i in range(n-1,-1,-1):
            for j in range(i+1,n):

                if s[i] == s[j]:
                    dp[i][j] = max(dp[i+1][j-1]+2,dp[i+1][j],dp[i][j-1])
                else:
                    dp[i][j] = max(dp[i+1][j],dp[i][j-1])
        return dp[0][n-1]
```



#### [1312. 让字符串成为回文串的最少插入次数](https://leetcode-cn.com/problems/minimum-insertion-steps-to-make-a-string-palindrome/)

难度困难135

给你一个字符串 `s` ，每一次操作你都可以在字符串的任意位置插入任意字符。

请你返回让 `s` 成为回文串的 **最少操作次数** 。

「回文串」是正读和反读都相同的字符串。

 

**示例 1：**

```
输入：s = "zzazz"
输出：0
解释：字符串 "zzazz" 已经是回文串了，所以不需要做任何插入操作。
```

题解：

还是基于如上的dp方法，`dp[i][j]`表示在位置[i,j]之间想要变成回文串需要的操作次数。



```python
class Solution:
    def minInsertions(self, s: str) -> int:
        n = len(s)
        dp = [[0]*n for _ in range(n)]
        for i in range(n-1,-1,-1):
            for j in range(i+1,n):
                if s[i] == s[j]:
                    dp[i][j] = dp[i+1][j-1]
                else:
                    dp[i][j] = min(dp[i+1][j],dp[i][j-1])+1
        return dp[0][n-1]
```

